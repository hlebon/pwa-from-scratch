<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>PWA From Scratch</title>
    <style>
      /* CSS APP-SHELL */
      :root {
        --gray: #ececec;
        --whitesmoke: #f5f5f5;
        --dark: #222;
      }
      body {
        margin: 0;
        background-color: var(--whitesmoke);
        font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI',
          Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue',
          sans-serif;
      }

      #navbar {
        height: 70px;
        background-color: white;
        box-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--dark);
      }

      #screens {
        display: flex;
        width: 100vw;
        overflow-x: scroll;
        scroll-snap-type: x mandatory;
      }

      .screen {
        min-height: calc(100vh - 70px);
        flex: 0 0 100%;
        scroll-snap-align: start;
      }
    </style>
  </head>
  <body>
    <!--APP-SHELL-->
    <nav id="navbar">
      <h1>Flights</h1>
    </nav>
    <main id="screens">
      <section id="screen-flights" class="screen">
        Flights
      </section>
      <section id="screen-rewards" class="screen">
        Rewards
      </section>
    </main>
    <script>
      /* JS APP-SHELL */
      function debounce(func, wait, immediate) {
        var timeout;
        return function() {
          var context = this,
            args = arguments;
          var later = function() {
            timeout = null;
            if (!immediate) func.apply(context, args);
          };
          var callNow = immediate && !timeout;
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
          if (callNow) func.apply(context, args);
        };
      }

      const screensEl = document.querySelector('#screens');
      const navbarEl = document.querySelector('#navbar');
      const pages = ['Flight', 'Rewards'];
      const pageTransition = debounce(() => {
        const index = Math.round(screensEl.scrollLeft / window.innerWidth);
        navbarEl.textContent = pagesName[index];
      }, 60);
      screensEl.addEventListener('scroll', pageTransition);
    </script>
  </body>
</html>
